"use strict";var superagent=require("superagent"),getRequest=function(e,t,n){return null==n&&(n={Accept:"application/json"}),new Promise(function(r,o){superagent.get(e).query(t).set(n).end(function(e,t){if(e)return void o(e);var i=null;"application/json"==n.Accept&&(i=t.body||t.text),r(i)})})},postRequest=function(e,t,n){return null==n&&(n={Accept:"application/json"}),new Promise(function(r,o){superagent.post(e).send(t).set(n).end(function(e,t){if(e)return void o(e);var i=null;"application/json"==n.Accept&&(i=t.body||t.text),r(i)})})};module.exports={get:getRequest,post:postRequest,slugVersion:function(e,t){var n=e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");if(null==t)return n.toLowerCase();if(t<=0)return n.toLowerCase();for(var r="",o="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)r+=o.charAt(Math.floor(Math.random()*o.length));return n.toLowerCase()+"-"+r},truncateText:function(e,t){return e.length<t?e:e.substring(0,t)+"..."},formattedDate:function(e){var t={weekday:"long",year:"numeric",month:"long",day:"numeric"};return null==e&&(e=new Date),e.toLocaleDateString("en-US",t)},scrapeInstagram:function(e,t){return null==t&&(t=70),new Promise(function(n,r){getRequest("https://www.instagram.com/"+e+"/?__a=1").then(function(e){var r=[];return null==e?void n(r):null==e.graphql?void n(r):null==e.graphql.user?void n(r):null==e.graphql.user.edge_owner_to_timeline_media?void n(r):null==e.graphql.user.edge_owner_to_timeline_media.edges?void n(r):(e.graphql.user.edge_owner_to_timeline_media.edges.forEach(function(e){if(null!=e.node){var n={};n.shortcode=e.node.shortcode,n.image=e.node.thumbnail_src,n.caption=e.node.edge_media_to_caption.edges[0].node.text,n.caption=n.caption.substring(0,t)+"...",r.push(n)}}),void n(r))}).catch(function(e){r(e)})})},scrapePreview:function(e,t){return new Promise(function(n,r){if(null==e||void 0==e)return void n(null);superagent.post("https://platform.turbo360-vector.com/scrapepreview").send({text:e,limit:t}).set("Accept","application/json").end(function(e,t){if(e)return void r(e);var o=t.body;n(o)})})}};